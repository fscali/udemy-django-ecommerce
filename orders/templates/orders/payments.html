{% extends 'base.html' %}
{% load static %}
{% load store_extras %}

{% block content %}


<section class="section-content padding-y bg">
  <div class="container">
  
  <!-- ============================ COMPONENT 1 ================================= -->
  
  <div class="row">
    <h4 class="col-lg-12 text-center mb-10">Review Your Order and Make Payment</h4>
    <aside class="col-lg-8">
      <div class="card">
        <h5 class="card-header">Billing Address</h5>
        <div class="card-body">
          <p class="card-text mb-0">{{order.full_name}}</p>
          <p class="card-text mb-0">{{order.full_address}}</p>
          <p class="card-text mb-0">{{order.city}}, {{order.state}} </p>
          <p class="card-text mb-0">{{order.country}}</p>
          <p class="card-text mb-0">{{order.email}}</p>
          <p class="card-text mb-0">{{order.phone}}</p>
          {% if order.order_note %}
            <b>Order Note</b>:{{order.order_note}}
          {% endif %}
        </div>
      </div><!-- card.// -->
  
      <div class="card">
        <h5 class="card-header">Payment Method</h5>
        <div class="card-body">
          <p class="card-text">PayPal</p>
        </div>
      </div><!-- card.// -->
  
      <div class="card">
        <h5 class="card-header">Review Products</h5>
        <div class="card-body">
          <table class="table table-borderless table-shopping-cart">
            <thead class="text-muted">
              <tr class="small text-uppercase">
                <th scope="col">Product</th>
                <th scope="col" width="120">Quantity</th>
                <th scope="col" width="120">Price</th>
              </tr>
            </thead>
              <tbody>
              {% for item in request.cart.cart_items.all %}
                {% with p=item.product %}
                  <tr>
                    <td> 
                      <figure class="itemside align-items-center">
                        <div class="aside"><img src="{{item.product.images.url}}" class="img-sm"></div>
                        <figcaption class="info">
                          <a href="#" class="title text-dark">{{ item.product.product_name }}</a>
                          <p class="text-muted small">Color: {{ item.color | capfirst }}<br> Size: {{ item.size | capfirst}}</p>
                        </figcaption>
                      </figure>
  
                    </td>
                    <td>{{ item.quantity }}</td>
                    <td>
                      <div class="price-wrap"> 
                        <var class="price">{{ item.total|currency }}</var> 
                        <small class="text-muted">{{ p.price|currency }} each</small> 
                      </div> 
                    </td>
                  </tr>
                {% endwith %}
              
              {% endfor %}
              </tbody>
            
            </table>
  
        </div>
      </div><!-- card.// -->
  
    </aside> <!-- col.// -->
    <aside class="col-lg-4">
  
      <div class="card">
      <div class="card-body">
        <dl class="dlist-align">
          <dt>Total price:</dt>
          <dd class="text-right">{{ request.cart.total|currency }}</dd>
        </dl>
        <dl class="dlist-align">
          <dt>Tax:</dt>
          <dd class="text-right">{{ request.cart.tax|currency}}</dd>
        </dl>
        <dl class="dlist-align">
          <dt>Total:</dt>
          <dd class="text-right text-dark b"><strong>{{ request.cart.grand_total|currency }}</strong></dd>
        </dl>
        <hr>
        <p class="text-center mb-3">
          <img src="{% static 'images/misc/payments.png' %}" height="26">
        </p>
        <a href="{% url 'checkout' %}" class="btn btn-primary btn-block"> Make Payment </a>
      </div> <!-- card-body.// -->
      </div> <!-- card.// -->
  
  </aside> <!-- col.// -->
  
  
  </div> <!-- row.// -->
  <!-- ============================ COMPONENT 1 END .// ================================= -->
  
  </div> <!-- container .//  -->
  </section>
  
{% endblock content %}


